<app-navbar> </app-navbar>

<div class='container' style='max-width: 1400px; margin:auto; padding-top: 3%;padding-left:8%;padding-right: 8%;' *ngIf='mb==false'>
  <div class='row'>

      <div class="col-8 ">
        <youtube-player
          videoId={{movie_video[0].key}}
          suggestedQuality="highres"
          [height]="400"
          [width]="720"
        ></youtube-player>
      </div>

    <div class='col-4'>
      <h1  class='detail'>{{movie_detail[0].title}}</h1>
      <div class='font-italic font-size-20' style='color:#ccc0ca'>{{movie_detail[0].tagline}}</div>
      <br>
      <div class='font-size-20'style='color:#ccc0ca' >{{movie_detail[0].release_date}} | &#9733; {{movie_detail[0].vote_average}} | {{movie_detail[0].runtime}}</div>
      <div class='font-size-18' style='padding-top:10px;' *ngIf='movie_detail[0].genres'><span class='font-size-19'>Genres: </span> <span style='color:#ccc0ca'>{{movie_detail[0].genres}}</span></div>
      <div class='font-size-18'><span class='font-size-19' *ngIf='movie_detail[0].genres'>Spoken Languages: </span><span style='color:#ccc0ca'>{{movie_detail[0].spoken_languages}}</span></div>

      <div *ngIf="success == 'success'">
        <button class="btn btn-primary mt-3" (click)="changeSuccessMessage(); addStorage(movie_detail[0].title, movie_detail[0].img, movie_detail[0].page) ">
          <div class='font-size-18'>Add to Watchlist</div>
        </button>
      </div>
      <div *ngIf="success == 'danger'">
        <button class="btn btn-primary mt-3" (click)="changeFailMessage(); deleteStorage(movie_detail[0].img, movie_detail[0].page) ">
          <div class='font-size-18'>Remove from watchlist</div>
        </button>
      </div>
        <ngb-alert #selfClosingAlert *ngIf="successMessage" type="{{danger}}" (closed)="successMessage = ''" class='mt-3'>{{ successMessage }}
        </ngb-alert>

    </div>

  </div>





  <h4 class='mt-3 mt-2' *ngIf='movie_detail[0].overview.length'>Description</h4>
  <p class='font-size-20' style='color:#ccc0ca' *ngIf='movie_detail[0].overview.length'>{{movie_detail[0].overview}}</p>
  <br>
  <h4 class='mt-2'>Share</h4>
  <a href='https://twitter.com/intent/tweet?text=Watch {{movie_detail[0].title}} https://www.youtube.com/watch?v={{movie_video[0].key}} %0d %23USC %23CSCI571 %23FightOn' target="_blank" class='mr-1'>
    <i class="fa fa-twitter"></i>
  </a>
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.youtube.com/watch?v={{movie_video[0].key}}" target="_blank">
    <i class="fa fa-facebook-square"></i>
  </a>
</div>


<div class='container' style='max-width: 1400px; margin:auto; padding-top: 5%;padding-left:8%;padding-right: 8%;' *ngIf='mb'>
    <div>
      <youtube-player
        videoId={{movie_video[0].key}}
        suggestedQuality="highres"
        [height]="200"
        [width]="355"
      ></youtube-player>
    </div>
  <div class='row' style='padding-left:3%'>

      <h4  class='detail' style='padding-top: 5%'>{{movie_detail[0].title}}</h4>
      <div class='font-italic font-size-20' style='color:#ccc0ca;min-width: 200px;'>{{movie_detail[0].tagline}}</div>

      <div class='font-size-20'style='color:#ccc0ca; padding-top:6%' >{{movie_detail[0].release_date}} | &#9733; {{movie_detail[0].vote_average}} | {{movie_detail[0].runtime}}</div>
      <div class='font-size-18' style='padding-top:10px;' *ngIf='movie_detail[0].genres'><span class='font-size-19'>Genres: </span> <span style='color:#ccc0ca'>{{movie_detail[0].genres}}</span></div>
      <div class='font-size-18'><span class='font-size-19' *ngIf='movie_detail[0].genres'>Spoken Languages: </span><span style='color:#ccc0ca'>{{movie_detail[0].spoken_languages}}</span></div>

      <div *ngIf="success == 'success'">
        <button class="btn btn-primary mt-3" (click)="changeSuccessMessage(); addStorage(movie_detail[0].title, movie_detail[0].img, movie_detail[0].page) ">
          <div class='font-size-18'>Add to Watchlist</div>
        </button>
      </div>
      <div *ngIf="success == 'danger'">
        <button class="btn btn-primary mt-3" (click)="changeFailMessage(); deleteStorage(movie_detail[0].img, movie_detail[0].page) ">
          <div class='font-size-18'>Remove from watchlist</div>
        </button>
      </div>
        <ngb-alert #selfClosingAlert *ngIf="successMessage" type="{{danger}}" (closed)="successMessage = ''" class='mt-3'>{{ successMessage }}
        </ngb-alert>

  </div>

  <h4 class='mt-3' *ngIf='movie_detail[0].overview.length'>Description</h4>
  <p class='font-size-20' style='color:#ccc0ca' *ngIf='movie_detail[0].overview.length'>{{movie_detail[0].overview}}</p>
  <br>
  <h4>Share</h4>
  <a href='https://twitter.com/intent/tweet?text=Watch {{movie_detail[0].title}} https://www.youtube.com/watch?v={{movie_video[0].key}} %0d %23USC %23CSCI571 %23FightOn' target="_blank" class='mr-1'>
    <i class="fa fa-twitter"></i>
  </a>
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.youtube.com/watch?v={{movie_video[0].key}}" target="_blank">
    <i class="fa fa-facebook-square"></i>
  </a>
</div>




<div style='max-width: 1400px; margin:auto' class='mt-4 pt-4 mb-4' *ngIf='movie_cast.length && mb==false'>
  <div class="container-fluid pt-2 "style="padding-left:8%; padding-right:8%" >
    <h1>Full Cast and Crew</h1>
  </div>
</div>

  <div style='max-width: 1450px; margin:auto; padding-left:8%; padding-right:8%' *ngIf='mb==false'>

    <div class="d-flex flex-row flex-nowrap overflow-auto" >

      <div class="card card-block mx-2 embed-responsive mb-3" style="min-width: 190px; max-width:190px;border:none;border-radius: 15px; cursor: pointer;" *ngFor="let d of movie_cast" (click)="openLg(d.profile_path, d.id)">
          <img src='https://image.tmdb.org/t/p/w500{{d.profile_path}}' style="object-fit: cover; width: 100%;">
          <div class='text-align: center' style="margin-bottom: 6%; margin-top:6%">
            <div style='color:black; text-align: center;'><h5>{{d.name}}</h5></div>
            <div style='font-weight:1000; color:black; text-align: center; font-size: 18px;'>AS</div>
            <div style='color:black; text-align: center; font-size:18px;'>{{d.character}}</div>
          </div>
      </div>
    </div>
  </div>


  <div style=' margin:auto' class='mt-4 pt-4 mb-4' *ngIf='movie_cast.length && mb'>
    <div class="container-fluid pt-2 "style="padding-left:6%; padding-right:6%"  >
      <h1>Full Cast and Crew</h1>
    </div>
  </div>
    <div style='max-width: 1450px; margin:auto; padding-left:0%' *ngIf='mb'>

      <div class="d-flex flex-row flex-nowrap overflow-auto" >

        <div class="card card-block mx-4 embed-responsive mb-3" style="min-width: 180px; max-width:190px;border:none;border-radius: 15px; cursor: pointer;" *ngFor="let d of movie_cast" (click)="openLg(d.profile_path, d.id)">
            <img src='https://image.tmdb.org/t/p/w500{{d.profile_path}}' style="object-fit: cover; width: 100%;">
            <div class='text-align: center' style="margin-bottom: 6%; margin-top:6%">
              <div style='color:black; text-align: center;'><h5>{{d.name}}</h5></div>
              <div style='font-weight:1000; color:black; text-align: center; font-size: 18px;'>AS</div>
              <div style='color:black; text-align: center; font-size:18px;'>{{d.character}}</div>
            </div>
        </div>
      </div>
    </div>



<div style='max-width: 1400px; margin:auto' class='mt-4 pt-3 pb-2' *ngIf='movie_review.length'>
  <div class="container-fluid pt-2 "style="padding-left:8%;padding-right:8%;" >
    <h1>Reviews <span style='color:#6c757d; padding-left: 1%;'> {{movie_review.length}}</span></h1>
  </div>
</div>
<div style='max-width: 1400px; margin:auto; padding-left:8%; padding-right:8%' *ngIf='mb==false'>
  <div class="card mb-3" style="border:none;border-radius: 15px;" *ngFor="let d of movie_review">
    <div class='row'>
      <div class='container col-2' style='width:80%' >
        <img src='{{d.avatar_path}}' class='rounded-circle' style='width:100%; max-width:86px; height: 86px;  margin-top: 10%;margin-left: 20%;'>
      </div>
      <div class='col-9'>
        <div style='color:black; font-weight: bold; font-size: 26px; padding-top: 2%; padding-bottom: 2%;'>A review created by {{d.author}}  &nbsp; &nbsp;<span style='background-color: black; color:white; margin-bottom:10%;border-top-left-radius: 15px;border-bottom-left-radius: 15px;border-top-right-radius: 15px;border-bottom-right-radius: 15px;'><span style='font-size: 22px;margin-left:-2px;margin-right:3px;'> &nbsp;&#9733;</span><span style='font-size:20px;'>{{d.rating}} &nbsp;</span></span></div>
        <br>
        <div style='color:#6c757d ;font-size:18px'>Written by {{d.author}} on {{d.created_at}}{{d.time}}</div>
        <br>
        <div style='color: black; font-size:18px'class='show-three-line'>{{d.content}}</div>
        <br>
        <div><a href='{{d.url}}' target="_blank" style='text-decoration: underline ;font-size:18px;'>Read the rest</a></div>
        <br>
      </div>
      <div class='col-1'></div>
    </div>
  </div>
</div>

<div style='max-width: 1400px; margin:auto; padding-left:8%; padding-right:8%' *ngIf='mb'>
  <div class="card mb-3" style="border:none;border-radius: 15px;" *ngFor="let d of movie_review">
    <div class='row'>
      <div class='container col-12' style='width:80%; ' >
        <img src='{{d.avatar_path}}' class='rounded-circle' style='width:100%; max-width:86px; height: 86px; margin-left:40px; margin-top:20px; margin-bottom: 15px;'>
      </div>
      <div class='col-11' style='padding-left:41px'>
        <div style='color:black; font-weight: 600 ; font-size: 26px; padding-top: 2%; padding-bottom: 2%;'>A review created by {{d.author}}  &nbsp; &nbsp;</div>

        <div style='width:60px;text-align: center; height:40px;background-color: black; color:white; margin-bottom:10%;border-top-left-radius: 15px;border-bottom-left-radius: 15px;border-top-right-radius: 15px;border-bottom-right-radius: 15px;'><span style='font-size: 26px; margin-bottom:20px'> &#9733;</span><span style='font-size:22px;'>&nbsp;{{d.rating}}</span></div>
        <div style='color:#6c757d ;font-size:17px'>Written by {{d.author}} on {{d.created_at}}{{d.time}}</div>
        <br>
        <div style='color: black; font-size:17px'class='show-three-line'>{{d.content}}</div>
        <br>
        <div><a href='{{d.url}}' target="_blank" style='text-decoration: underline ;font-size:18px;'>Read the rest</a></div>
        <br>
      </div>
      <div class='col-1'></div>
    </div>
  </div>
</div>


<div style='max-width: 1400px; margin:auto' class='mt-4 pt-3' *ngIf="recommend_mv.length && mb==false" >
  <div class="container-fluid pt-2 "style="padding-left:8%;padding-right:8%;" >
    <h1>Recommended Movies</h1>
  </div>
</div>
<div style='max-width: 1400px; margin:auto' class='mt-4 pt-3' *ngIf="recommend_mv.length && mb" >
  <div class="container-fluid pt-4 "style="padding-left:15%;padding-right:8%;" >
    <h1 class='mb-4'style='font-weight: 600;'>Recommended Movies</h1>
  </div>
</div>
<div style='max-width: 1400px; margin:auto' *ngIf="recommend_mv.length">

  <app-listcard [data]="recommend_mv"></app-listcard>
</div>


<div style='max-width: 1400px; margin:auto' class='mt-4' *ngIf="similar_mv.length && mb==false">
<div class="container-fluid pt-2 "style="padding-left:8%;padding-right:8%;" >
  <h1>Similar Movie</h1>
</div>
</div>
<div style='max-width: 1400px; margin:auto' class='mt-4' *ngIf="similar_mv.length && mb">
  <div class="container-fluid pt-4 "style="padding-left:15%;padding-right:8%;" >
    <h1 class='mb-4'style='font-weight: 600;'>Similar Movies</h1>
  </div>
  </div>
<div style='max-width: 1400px; margin:auto' *ngIf="similar_mv.length">
  <app-listcard [data]="similar_mv"></app-listcard>
</div>
<app-footer class="mt-auto"></app-footer>
